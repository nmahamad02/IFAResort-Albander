<div class="container">
    <div class="col-12">
        <div class="row">
            <div class="col-4">
                <mat-card-title>Contact Details</mat-card-title>
            </div>
            <div class="col-8">
                <div class="row">
                    <div class="col">
                        <button class="btn-primary text-white btn btn-block"  (click)="newForm()" title="New contact">
                            <mat-icon>add</mat-icon> 
                        </button>
                    </div>
                    <div class="col">
                        <button class="btn-secondary text-white btn btn-block" [routerLinkActive]="['active']" [routerLink]="['/crm/invoicereport']" (click)="setReportData(invReportApiUrl, invReportName)" title="Download Contact Details">
                            <mat-icon>print</mat-icon> 
                        </button>
                    </div>
                    <div class="col">
                        <button class="btn-success text-white btn btn-block" (click)="submitForm()" title="Submit Contact">
                            <mat-icon>note_add</mat-icon>  
                        </button>
                    </div>
                    <div class="col">
                        <button class="btn-info text-white btn btn-block" [routerLink]="['/crm/dashboard']" title="Delete Contact">
                            <mat-icon>delete</mat-icon> 
                        </button> 
                    </div>
                    <div class="col">
                        <button class="btn-danger text-white btn btn-block" (click)="newForm()" title="Refresh this form">
                            <mat-icon>cancel</mat-icon> 
                        </button>
                    </div>
                    <div class="col">
                        <button class="btn-warning text-white btn btn-block" [routerLink]="['/crm/contacts']" title="Return to Contact List">
                            <mat-icon>arrow_back</mat-icon> 
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <div class="row">
            <form class="form-container" [formGroup]="contactsForm">
                <div class="row">
                    <div class="col-3">
                        <mat-form-field class="full-width">
                            <mat-label>Contact ID</mat-label>
                            <input #partyid matInput required formControlName="contactId"
                            (keydown.enter)="getPartyDetails(partyid.value)">
                            <mat-error>Contact ID is <strong>required</strong></mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col-3">
                        <mat-form-field class="full-width">
                            <mat-label>Contact Person</mat-label>
                            <input matInput required formControlName="contactPerson">
                            <mat-error>Contact Person is <strong>required</strong></mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col-3">
                        <mat-form-field class="full-width">
                            <mat-label>Name</mat-label>
                            <input matInput required formControlName="name">
                            <mat-error>Name is <strong>required</strong></mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col-3">
                        <mat-form-field class="full-width">
                            <mat-label>PCODE</mat-label>
                            <input matInput #Pcode formControlName="pcode" (keydown.f2)="lookUpPcode(Pcode.value)">
                        </mat-form-field>
                    </div>
                </div>
                <div class="row">
                    <div class="col-4">
                        <mat-form-field class="full-width">
                            <mat-label>Address 1</mat-label>
                            <input matInput required formControlName="address1">
                        </mat-form-field>
                    </div>
                    <div class="col-4">
                        <mat-form-field class="full-width">
                            <mat-label>Address 2</mat-label>
                            <input matInput required formControlName="address2" >
                        </mat-form-field>
                    </div>
                    <div class="col-4">
                        <mat-form-field class="full-width">
                            <mat-label>Address 3</mat-label>
                            <input matInput required formControlName="address3" >
                        </mat-form-field>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <mat-form-field class="full-width">
                            <mat-label>Flat #</mat-label>
                            <input matInput required formControlName="flat">
                        </mat-form-field>
                    </div>
                    <div class="col">
                        <mat-form-field class="full-width">
                            <mat-label>Building / House #</mat-label>
                            <input matInput required formControlName="buildingHouse">
                            <mat-error>Building / House # is <strong>required</strong></mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col">
                        <mat-form-field class="full-width">
                            <mat-label>Road</mat-label>
                            <input matInput required formControlName="road">
                            <mat-error>Road is <strong>required</strong></mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col">
                        <mat-form-field class="full-width">
                            <mat-label>Block</mat-label>
                            <input matInput required formControlName="block">
                            <mat-error>Block is <strong>required</strong></mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col">
                        <mat-form-field class="full-width">
                            <mat-label>PO BOX</mat-label>
                            <input matInput required formControlName="poBox">
                            <mat-error>PO BOX is <strong>required</strong></mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col">
                        <mat-form-field class="full-width">
                            <mat-label>Area</mat-label>
                            <input #area matInput required formControlName="area" (keydown.f2)="lookUpArea(area.value)">
                        </mat-form-field>
                    </div>
                </div>
                <div class="row">
                    <div class="col-3">
                        <mat-form-field class="full-width">
                            <mat-label>Ref.No</mat-label>
                            <input matInput required formControlName="refNo">
                            <mat-error>Ref.no is<strong>required</strong></mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col-3">
                        <mat-form-field class="full-width">
                            <mat-label>Mobile No</mat-label>
                            <input matInput required formControlName="mobileNo">
                            <mat-error>Mobile No is <strong>required</strong></mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col-6">
                        <mat-form-field class="full-width">
                            <mat-label>Email</mat-label>
                            <input matInput required formControlName="email">
                            <mat-error>Email is <strong>required</strong></mat-error>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row">
                    <div class="col-3">
                        <mat-form-field class="full-width">
                            <mat-label>Phone 1</mat-label>
                            <input matInput required formControlName="phone1" >
                        </mat-form-field>
                    </div>
                    <div class="col-3">
                        <mat-form-field class="full-width">
                            <mat-label>Phone 2</mat-label>
                            <input matInput required formControlName="phone2" >
                        </mat-form-field>
                    </div>
                    <div class="col-3">
                        <mat-form-field class="full-width">
                            <mat-label>Fax 1</mat-label>
                            <input matInput required formControlName="fax1">
                        </mat-form-field>
                    </div>
                    <div class="col-3">
                        <mat-form-field class="full-width">
                            <mat-label>Fax 2</mat-label>
                            <input matInput required formControlName="fax2">
                        </mat-form-field>
                   </div>
                </div>         
            </form>
        </div>
        <div class="col-12">
            <ng-template #pcodeLookupDailoug style="width: 60%;">
                <h3 matDialogTitle>
                    <b>Look up Customers: {{ pcodeArr.length }}</b>
                </h3>
                <hr>
                <div mat-dialog-content>
                    <table mat-table 
                    [dataSource]="pcodeDataSource" 
                    class="mat-elevation-z8" 
                    style="width: 65vw; height: 50vh;">
                        <ng-container matColumnDef="pcode">
                            <th mat-header-cell 
                            *matHeaderCellDef> Code </th>
                            <td mat-cell 
                            *matCellDef="let prod"> {{ prod.pcode }} </td>
                        </ng-container>
                      
                        <ng-container matColumnDef="custname">
                            <th mat-header-cell 
                            *matHeaderCellDef> Name </th>
                            <td mat-cell 
                            *matCellDef="let prod"> {{ prod.title_cd }} {{ prod.cust_name }} </td>
                        </ng-container>
                      
                        <tr mat-header-row 
                        *matHeaderRowDef="pcodeDisplayedColumns"></tr>
                        <tr mat-row 
                        *matRowDef="let row; columns: pcodeDisplayedColumns;  let i= index"
                        [ngClass]="{'highlight': selectedRowIndex == i}"
                        (click)="highlight('prod',i)"
                        tabindex="999"
                        (keydown.arrowdown)="arrowDownEvent('prod',selectedRowIndex)"
                        (keydown.arrowup)="arrowUpEvent('prod',selectedRowIndex)" 
                        (keydown.enter)="selectpcode(pcodeArr[selectedRowIndex])"></tr>
                          
                    </table>
                </div>
                <mat-dialog-actions align="end">
                    <button mat-button 
                    matDialogClose="close">Close</button>
                </mat-dialog-actions>
            </ng-template>
        </div>
           
        <div class="col-12">
            <ng-template #areaLookupDailoug 
            style="width: 60%;">
                <h3 matDialogTitle>
                    <b>Look up Area: {{ AreaArr.length }}</b>
                </h3>
                <hr>
                <div mat-dialog-content>
                    <table mat-table 
                    [dataSource]="areaDataSource" 
                    class="mat-elevation-z8" 
                    style="width: 65vw; height: 50vh;">
                        <ng-container matColumnDef="areano">
                            <th mat-header-cell 
                            *matHeaderCellDef> Area No </th>
                            <td mat-cell 
                            *matCellDef="let area"> {{ area.CodeN }} </td>
                        </ng-container>
                      
                        <ng-container matColumnDef="areaname">
                            <th mat-header-cell 
                            *matHeaderCellDef> Area Name </th>
                            <td mat-cell 
                            *matCellDef="let area"> {{ area.AreaName }} </td>
                        </ng-container>
                      
                        <tr mat-header-row 
                        *matHeaderRowDef="areaDisplayedColumns"></tr>
                        <tr mat-row 
                        *matRowDef="let row; columns: areaDisplayedColumns;  let i= index"
                        [ngClass]="{'highlight': selectedRowIndex == i}"
                        (click)="highlight('area',i)"
                        tabindex="999"
                        (keydown.arrowdown)="arrowDownEvent('area',selectedRowIndex)"
                        (keydown.arrowup)="arrowUpEvent('area',selectedRowIndex)" 
                        (keydown.enter)="selectarea(AreaArr[selectedRowIndex])"></tr>
                      
                    </table>
                </div>
                <mat-dialog-actions align="end">
                    <button mat-button matDialogClose="close">Close</button>
                </mat-dialog-actions>
            </ng-template>
        </div>
    </div>
</div>